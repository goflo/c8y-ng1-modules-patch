"use strict";!function(){function e(e,n,t,r){var o=this;function s(n){return function(e){o.onChangeUser({user:e,action:n})}}function l(){return!(!o.searchFilter&&!_.get(o.globalRolesFilter,"length",0))}function a(e){return o.FEATURE_USER_HIERARCHY&&o.currentUserId&&e.id!==o.currentUserId}_.assign(o,{$onInit:function(){e.all({twoFactorAuthAvailable:r.isTfaAvailable(),totpStrategy:t.getTfaStrategy()}).then(function(e){return _.assign(o,e)}),r.userHierarchyActive().then(function(e){o.FEATURE_USER_HIERARCHY=e}),t.current().then(function(e){o.currentUserId=_.get(e,"id")})},$onChanges:function(e){e.users&&o.users&&(o.userFlatTree=r.createUserFlatTree(o.users),n.paging=o.users.paging,n.loadNext=function(){return o.onLoadMore()})},searchOn:l,fullName:r.fullName,toggleExpanded:function(e){e._expanded||o.onLoadSubusers({user:e});r.toggleExpanded(e)},visible:function(e){return!!l()||r.visibleInList(e)},detailLink:r.detailLink,editUser:r.editUser,mapRolesForUser:_.memoize(function(e){return _.map(e,"group")}),changeGlobalRoles:function(e,n){o.onChangeUser({user:e,action:{name:"changeGlobalRoles",data:{roles:n}}})},copyInventoryRoles:s("copyInventoryRoles"),disable:s("disable"),enable:s("enable"),remove:s("remove"),delegate:s("delegate"),removeDelegate:s("removeDelegate"),getPasswordStrength:r.getPasswordStrength,getPasswordColor:r.getPasswordColor,getPasswordIcon:r.getPasswordIcon,showDelegate:function(e){return a(e)&&!e.delegatedBy},showUndelegate:function(e){return a(e)&&e.delegatedBy},globalRolesAvailable:function(e){return _.get(e,"_owner._globalRoles",o.globalRoles)},isUndeletable:r.isUndeletable,isCurrent:r.isCurrent})}e.$inject=["$q","$scope","c8yUser","c8yUsersUi"],angular.module("c8y.users").component("c8yUserList",{bindings:{users:"<",globalRoles:"<",searchFilter:"<",globalRolesFilter:"<",onChangeUser:"&",onLoadSubusers:"&",onLoadMore:"&"},templateUrl:":::PLUGIN_PATH:::/userList/userList.html",controller:e,controllerAs:"vm"})}();