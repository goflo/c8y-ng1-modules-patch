"use strict";!function(){function e(o,e,t){var i=this,r=[],n=[];function l(){r=_.clone((i.assignedRoles||{}).roles)||[]}function s(e){return _(e).sortBy(f).map(f).value().join(", ")}function c(e){return _.some(r,{id:e.id})||d(e)}function d(e){return _.some(n,{id:e.id})}function u(){return e("filter")(i.inventoryRoles,i.roleTextFilter)}function a(){return _.every(u(),c)}function g(){var e=_.sortBy(_.map((i.assignedRoles||{}).roles,"id")),n=_.sortBy(_.map(r,"id"));i.isUnchanged=_.isEqual(e,n)}function f(e){return t.getString(e.name)}_.assign(i,{displayTextAssigned:function(){return s((i.assignedRoles||{}).roles)},displayTextInherited:function(){return s(n)},$onChanges:function(e){e.assignedRoles&&l();e.inheritedRoles&&(n=i.inheritedRoles)},toggle:function(e){c(e)?_.remove(r,{id:e.id}):(r.push(e),r=_.uniqBy(r,"id"));g()},toggleSelectAll:function(){a()?r.length=0:r=_.reject(u(),d);g()},allSelected:a,isSelected:c,isInherited:d,apply:function(){i.onApply({roles:r}),i.isDropDownOpen=!1},onToggleDropdown:function(e){e||(l(),i.isUnchanged=!0)},isAllowedByOwner:function(e){return!i.ownerAllowedRoles||_.some(i.ownerAllowedRoles,{id:e.id})},isUnchanged:!0,getFormattedInventoryRoleDescription:_.memoize(function(e){var n=t.getString(e.trim());return o.trustAsHtml("\n        <div>\n          ".concat(n,"\n        </div>\n      "))}),translateName:f})}e.$inject=["$sce","$filter","gettextCatalog"],angular.module("c8y.userRoles").component("c8yInventoryRoleSelector",{bindings:{assignedRoles:"<",inheritedRoles:"<",inventoryRoles:"<",ownerAllowedRoles:"<",onApply:"&"},templateUrl:":::PLUGIN_PATH:::/inventoryRoleSelector/inventoryRoleSelector.html",controller:e,controllerAs:"vm"})}();