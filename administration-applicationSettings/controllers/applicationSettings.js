"use strict";!function(){function t(n,t,e,i,a,o,c,l){var p="access.control",s="allow.origin",r=c('The \'Allowed domain\' setting will enable your JavaScript web applications to directly communicate with REST APIs.\nSet it to "*" to allow communication from any host.\nSet it to "http://my.host.com, http://myother.host.com" to allow applications from http://my.host.com and from http://myother.host.com to communicate with the platform.\nLeave it empty to allow access only from your tenant\'s domain.\nSee http://enable-cors.org for more information.');function u(t){return _.filter(t,{type:"HOSTED"})}function f(t){var e=t.key.replace(/\./,"_");n[e]=t}function m(){e.detail({category:p,key:s}).then(function(t){return t.data}).then(f)}_.assign(n,{applicationSettings:{},updateDefaultApp:function(){return e.updateOption({category:"application",key:"default.application",value:n.applicationSettings.defaultApplication.id}).then(function(){o.success(l.getString('Application "{{appName | humanizeAppName}}" is now the default application for the tenant.',{appName:n.applicationSettings.defaultApplication.contextPath}))})},helpText:r,saveAccessControl:function(t){return""===t.value?e.deleteOption({category:p,key:s}).then(function(){o.success(c("Access not allowed from any domains."))}):function(t){return e.updateOption({category:p,key:s,value:t.value}).then(function(){return m()}).then(function(){o.success(l.getString("Access allowed from domain(s): {{value}}.",t))})}(t)},filterHostedApps:u}),a.listByVisibleLinks().then(function(t){n.applications=u(t),e.detail({category:"application",key:"default.application"}).then(function(t){n.applicationSettings.defaultApplication=_.find(n.applications,{id:t.data.value})})}),m(),i.changeTitle({title:c("Application")})}t.$inject=["$scope","$q","c8ySettings","c8yTitle","c8yApplication","c8yAlert","gettext","gettextCatalog"],angular.module("c8y.parts.applicationSettings").controller("applicationSettingsCtrl",t)}();